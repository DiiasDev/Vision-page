<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório - Vision Corretora</title>
    <link rel="stylesheet" href="../css/relatorio.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="form-wrapper">
            <!-- Back to Home Button -->
            <button class="btn-home" onclick="window.location.href='../index.html'">
                <i class="fas fa-arrow-left"></i> Voltar para Home
            </button>

            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-step active" data-step="1">
                    <div class="step-icon"><i class="fas fa-car"></i></div>
                    <span class="step-label">Placa</span>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="2">
                    <div class="step-icon"><i class="fas fa-user"></i></div>
                    <span class="step-label">Nome</span>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="3">
                    <div class="step-icon"><i class="fas fa-phone"></i></div>
                    <span class="step-label">Contato</span>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="4">
                    <div class="step-icon"><i class="fas fa-paper-plane"></i></div>
                    <span class="step-label">Enviar</span>
                </div>
            </div>

            <!-- Form Steps -->
            <form id="relatorioForm">
                <!-- Step 1: Placa -->
                <div class="form-step active" data-step="1">
                    <div class="step-header">
                        <h2>Informações do Veículo</h2>
                        <p>Digite a placa do veículo para começar</p>
                    </div>
                    <div class="form-group">
                        <label for="placa">Placa do Veículo</label>
                        <input 
                            type="text" 
                            id="placa" 
                            name="placa" 
                            placeholder="ABC-1234"
                            maxlength="8"
                            required
                        >
                        <small class="hint">Formato: ABC-1234 ou ABC1D23</small>
                    </div>
                    <div class="button-group">
                        <button type="button" class="btn btn-next" onclick="nextStep()">
                            Próximo <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Nome -->
                <div class="form-step" data-step="2">
                    <div class="step-header">
                        <h2>Dados Pessoais</h2>
                        <p>Informe seu nome completo</p>
                    </div>
                    <div class="form-group">
                        <label for="nome">Nome Completo</label>
                        <input 
                            type="text" 
                            id="nome" 
                            name="nome" 
                            placeholder="João da Silva Santos"
                            required
                        >
                        <small class="hint">Digite seu nome como consta nos documentos</small>
                    </div>
                    <div class="button-group">
                        <button type="button" class="btn btn-prev" onclick="prevStep()">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button type="button" class="btn btn-next" onclick="nextStep()">
                            Próximo <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 3: Celular -->
                <div class="form-step" data-step="3">
                    <div class="step-header">
                        <h2>Contato</h2>
                        <p>Informe seu número de celular</p>
                    </div>
                    <div class="form-group">
                        <label for="celular">Número de Celular</label>
                        <input 
                            type="tel" 
                            id="celular" 
                            name="celular" 
                            placeholder="(11) 99999-9999"
                            required
                        >
                        <small class="hint">Incluir DDD</small>
                    </div>
                    <div class="button-group">
                        <button type="button" class="btn btn-prev" onclick="prevStep()">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button type="button" class="btn btn-next" onclick="nextStep()">
                            Próximo <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 4: Confirmação -->
                <div class="form-step" data-step="4">
                    <div class="step-header">
                        <h2>Revisão dos Dados</h2>
                        <p>Confira as informações antes de enviar</p>
                    </div>
                    <div class="summary-card">
                        <div class="summary-item">
                            <i class="fas fa-car"></i>
                            <div class="summary-content">
                                <span class="summary-label">Placa</span>
                                <span class="summary-value" id="summary-placa">-</span>
                            </div>
                        </div>
                        <div class="summary-item">
                            <i class="fas fa-user"></i>
                            <div class="summary-content">
                                <span class="summary-label">Nome Completo</span>
                                <span class="summary-value" id="summary-nome">-</span>
                            </div>
                        </div>
                        <div class="summary-item">
                            <i class="fas fa-phone"></i>
                            <div class="summary-content">
                                <span class="summary-label">Celular</span>
                                <span class="summary-value" id="summary-celular">-</span>
                            </div>
                        </div>
                    </div>
                    <div class="button-group">
                        <button type="button" class="btn btn-prev" onclick="prevStep()">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button type="button" class="btn btn-submit" onclick="sendToWhatsApp()">
                            <i class="fab fa-whatsapp"></i> Enviar via WhatsApp
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 4;

        // Máscaras de input
        document.getElementById('placa').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^a-zA-Z0-9]/g, '').toUpperCase();
            if (value.length <= 7) {
                if (value.length > 3) {
                    value = value.slice(0, 3) + '-' + value.slice(3);
                }
            }
            e.target.value = value;
        });

        document.getElementById('celular').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/^(\d{2})(\d)/g, '($1) $2');
                value = value.replace(/(\d)(\d{4})$/, '$1-$2');
            }
            e.target.value = value;
        });

        function nextStep() {
            const currentStepElement = document.querySelector(`.form-step[data-step="${currentStep}"]`);
            const inputs = currentStepElement.querySelectorAll('input[required]');
            
            let valid = true;
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    valid = false;
                    input.classList.add('error');
                } else {
                    input.classList.remove('error');
                }
            });

            if (!valid) {
                return;
            }

            if (currentStep < totalSteps) {
                currentStep++;
                updateStep();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStep();
            }
        }

        function updateStep() {
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.remove('active');
            });
            document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add('active');

            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                
                if (index < currentStep - 1) {
                    step.classList.add('completed');
                } else if (index === currentStep - 1) {
                    step.classList.add('active');
                }
            });

            document.querySelectorAll('.progress-line').forEach((line, index) => {
                if (index < currentStep - 1) {
                    line.classList.add('active');
                } else {
                    line.classList.remove('active');
                }
            });

            if (currentStep === 4) {
                document.getElementById('summary-placa').textContent = document.getElementById('placa').value;
                document.getElementById('summary-nome').textContent = document.getElementById('nome').value;
                document.getElementById('summary-celular').textContent = document.getElementById('celular').value;
            }
        }

        function sendToWhatsApp() {
            const placa = document.getElementById('placa').value;
            const nome = document.getElementById('nome').value;
            const celular = document.getElementById('celular').value;
ç
            const message = ` *NOVA SOLICITAÇÃO DE COTAÇÃO*%0A` +
                          `━━━━━━━━━━━━━━━━━━━━━━━%0A%0A` +
                          ` *Dados do Cliente:*%0A%0A` +
                          ` *Nome:* ${nome}%0A` +
                          ` *Celular:* ${celular}%0A` +
                          ` *Placa do Veículo:* ${placa}%0A%0A` +
                          `━━━━━━━━━━━━━━━━━━━━━━━%0A` +
                          ` *Data:* ${new Date().toLocaleDateString('pt-BR')}%0A` +
                          ` *Horário:* ${new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}%0A%0A` +
                          ` *Cliente aguarda retorno para cotação de seguro.*`;

            const whatsappNumber = '5519997980722';
            const url = `https://wa.me/${whatsappNumber}?text=${message}`;
            
            window.open(url, '_blank');
        }
    </script>
</body>
</html>